(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"0a49":function(e,t,s){var n=s("9b43"),i=s("626a"),a=s("4bf8"),r=s("9def"),o=s("cd1c");e.exports=function(e,t){var s=1==e,c=2==e,l=3==e,u=4==e,d=6==e,f=5==e||d,m=t||o;return function(t,o,h){for(var v,p,b=a(t),g=i(b),C=n(o,h,3),S=r(g.length),_=0,L=s?m(t,S):c?m(t,0):void 0;S>_;_++)if((f||_ in g)&&(v=g[_],p=C(v,_,b),e))if(s)L[_]=p;else if(p)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:L.push(v)}else if(u)return!1;return d?-1:l||u?u:L}}},1169:function(e,t,s){var n=s("2d95");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"123d":function(e,t,s){(function(t,s){e.exports=s()})(0,function(){"use strict";var e=function(e,t){"function"===typeof e.scroll?e.scroll({top:e.scrollHeight,behavior:t?"smooth":"instant"}):e.scrollTop=e.scrollHeight},t={bind:function(t,s){var n=!1;t.addEventListener("scroll",function(e){n=t.scrollTop+t.clientHeight+1<t.scrollHeight}),new MutationObserver(function(i){var a=s.value||{},r=!1===a.always&&n;if(a.scrollonremoved){if(r||1!=i[i.length-1].addedNodes.length&&1!=i[i.length-1].removedNodes.length)return}else if(r||1!=i[i.length-1].addedNodes.length)return;e(t,a.smooth)}).observe(t,{childList:!0,subtree:!0})},inserted:e},s={install:function(e,s){e.directive("chat-scroll",t)}};return"undefined"!==typeof window&&window.Vue&&window.Vue.use(s),s})},2032:function(e,t,s){},"20ea":function(e,t,s){"use strict";var n=s("9a64"),i=s.n(n);i.a},"24bd":function(e,t,s){"use strict";var n=s("d7c4"),i=s.n(n);i.a},2634:function(e,t,s){},"2f83":function(e,t,s){"use strict";var n=s("2032"),i=s.n(n);i.a},5458:function(e,t,s){"use strict";var n=s("2634"),i=s.n(n);i.a},"5abc":function(e,t,s){},7514:function(e,t,s){"use strict";var n=s("5ca1"),i=s("0a49")(5),a="find",r=!0;a in[]&&Array(1)[a](function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(a)},"9a64":function(e,t,s){},a304:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message_content",attrs:{id:"messageContent"}},[n("div",{staticClass:"message_list"},[n("ul",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll"}],staticClass:"messages"},e._l(e.messageList,function(t){return n("li",{class:[t.from===e.user.objectId?e.activeClass:""]},[n("div",{staticClass:"time"},[n("span",[e._v(e._s(e._f("formatTime")(t.timestamp)))])]),n("div",{staticClass:"from"},[n("img",{attrs:{src:s("cf05"),alt:""}}),n("div",[n("div",{class:[t.from===e.user.objectId?e.activeNameClass:""]},[e._v(e._s(e.nameList[t.from])+"\n                        ")]),n("div",{staticClass:"content"},[e._v(e._s(t.text))])])])])}),0)])])},i=[],a=(s("ac6a"),s("7514"),s("cebc")),r=(s("7f7f"),s("cadf"),s("551c"),s("097d"),s("2f62")),o=s("4fe3"),c=s("0631"),l=s.n(c),u=s("efe0"),d=s("2b0e"),f=s("123d"),m=s.n(f);d["default"].use(m.a);var h={name:"MessageContent",data:function(){return{messageList:[],activeClass:"self_send",activeNameClass:"self_name",nameList:{}}},created:function(){var e=this;this.setCurrentConversationId(this.$route.params.id);var t=l.a.User.current();this.getNameList().then(function(){e.realtime.createIMClient(t).then(function(t){t.getConversation(e.$route.params.id).then(function(t){u["a"].$emit("setTitle",t._attributes.name),e.setCurrentConversation(t),t.queryMessages({limit:100}).then(function(t){e.messageList=t}).catch(console.error.bind(console))}).catch(console.error.bind(console)),t.on(o["Event"].MESSAGE,function(t,s){console.log("[Bob] received a message from ["+t.from+"]: "+t.text),e.messageList.push(t)})})}),u["a"].$on("sendSuccess",function(t){e.messageList.push(t)})},computed:Object(a["a"])({},Object(r["d"])(["realtime","user","currentConversationId"])),methods:Object(a["a"])({},Object(r["c"])(["setCurrentConversation","setCurrentConversationId"]),{getNameList:function(){var e=this,t=new l.a.Query("_User");return t.find().then(function(t){t.forEach(function(t){e.nameList[t.id]=t.attributes.username})})}})},v=h,p=(s("20ea"),s("2877")),b=Object(p["a"])(v,n,i,!1,null,"46f6799e",null);b.options.__file="MessageContent.vue";t["default"]=b.exports},ac6a:function(e,t,s){for(var n=s("cadf"),i=s("0d58"),a=s("2aba"),r=s("7726"),o=s("32e9"),c=s("84f2"),l=s("2b4c"),u=l("iterator"),d=l("toStringTag"),f=c.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(m),v=0;v<h.length;v++){var p,b=h[v],g=m[b],C=r[b],S=C&&C.prototype;if(S&&(S[u]||o(S,u,f),S[d]||o(S,d,b),c[b]=f,g))for(p in n)S[p]||a(S,p,n[p],!0)}},bbb5:function(e,t,s){"use strict";var n=s("5abc"),i=s.n(n);i.a},cd1c:function(e,t,s){var n=s("e853");e.exports=function(e,t){return new(n(e))(t)}},cf05:function(e,t,s){e.exports=s.p+"img/logo.82b9c7a5.png"},d7c4:function(e,t,s){},db80:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"conversations"},[s("Layout",{staticClass:"layout"},[s("Sider",{attrs:{breakpoint:"md",width:"300",collapsible:"","collapsed-width":78},model:{value:e.isCollapsed,callback:function(t){e.isCollapsed=t},expression:"isCollapsed"}},[s("SidebarList",{class:e.listItemClasses,attrs:{width:"auto"}}),s("div",{attrs:{slot:"trigger"},slot:"trigger"})],1),s("Layout",[s("Header",{staticClass:"title_bar_wrapper"},[s("Title")],1),s("Content",{staticClass:"message_content_wrapper"},[s("router-view",{key:e.$route.fullPath})],1),s("Footer",{staticClass:"send_message_wrapper"},[s("SendMessage")],1)],1)],1)],1)},i=[],a=(s("7514"),s("96cf"),s("3b8d")),r=s("cebc"),o=(s("cadf"),s("551c"),s("097d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"side_list"},[e._m(0),s("div",{staticClass:"message_list"},[s("Card",{staticStyle:{width:"300px"},attrs:{title:"聊天室",padding:0,shadow:""}},[s("CellGroup",{on:{"on-click":e.checkSelected}},[s("Cell",{ref:"5c3e8d989f5454006bf853d8",attrs:{name:"5c3e8d989f5454006bf853d8",to:"/conversations/5c3e8d989f5454006bf853d8",selected:e.isSelected["5c3e8d989f5454006bf853d8"],title:"广场"}})],1)],1),s("Card",{staticStyle:{width:"300px"},attrs:{title:"单聊",icon:"ios-person",padding:0,shadow:""}},[s("CellGroup",{staticClass:"box",on:{"on-click":e.checkSelected}},e._l(e.singleList,function(t){return s("Cell",{key:t.id,ref:t.id,refInFor:!0,attrs:{to:"/conversations/"+t.id,selected:e.isSelected[t.id],name:t.id,title:t.name,label:t.lastMessage?t.lastMessage.text:""}})}),1)],1),s("Card",{staticStyle:{width:"300px"},attrs:{title:"群聊",icon:"ios-people",padding:0,shadow:""}},[s("CellGroup",{staticClass:"box",on:{"on-click":e.checkSelected}},[s("Cell",{ref:"11",attrs:{selected:e.isSelected[11],name:"11",title:"Only show titles",label:"sss"}}),s("Cell",{ref:"22",attrs:{selected:e.isSelected[22],name:"22",title:"Only show titles"}}),s("Cell",{ref:"33",attrs:{selected:e.isSelected[33],name:"33",title:"Only show titles"}}),s("Cell",{ref:"44",attrs:{selected:e.isSelected[44],name:"44",title:"Only show titles"}}),s("Cell",{ref:"55",attrs:{selected:e.isSelected[55],name:"55",title:"Only show titles"}}),s("Cell",{ref:"66",attrs:{selected:e.isSelected[66],name:"66",title:"Only show titles"}}),s("Cell",{ref:"77",attrs:{selected:e.isSelected[77],name:"77",title:"With Badge"}},[s("Badge",{attrs:{slot:"extra",count:10},slot:"extra"})],1)],1)],1)],1),s("Card",{staticClass:"last_cord",staticStyle:{width:"300px"},attrs:{shadow:""}},[s("div",[e._v("当前用户："+e._s(e.user.username))]),s("a",{attrs:{slot:"extra"},on:{click:e.onLogout},slot:"extra"},[s("Icon",{attrs:{size:"26",type:"md-exit"}})],1)])],1)}),c=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title"},[s("h1",[e._v("小明聊天室")])])}],l=s("2f62"),u=s("0631"),d=s.n(u),f=s("efe0"),m={name:"SidebarList",data:function(){return{isSelected:{},chartRoomId:"",singleList:[]}},computed:Object(r["a"])({},Object(l["d"])(["realtime","user","currentConversationId"])),mounted:function(){var e=this;this.checkSelected(this.$route.params.id);var t=d.a.User.current();this.realtime.createIMClient(t).then(function(t){var s=t.getQuery();s.containsMembers([e.user.objectId]).find().then(function(t){e.singleList=t}).catch(console.error.bind(console))}),f["a"].$on("newConversation",function(t){e.singleList.push(t)})},methods:Object(r["a"])({},Object(l["c"])(["setIsLogin","setUser","setCurrentConversationId"]),Object(l["b"])(["logout"]),{onLogout:function(){var e=this;this.logout().then(function(){e.setIsLogin(!1),e.setUser(null),e.$router.push("/")})},checkSelected:function(e){for(var t in this.isSelected)this.isSelected[t]=!1;this.$set(this.isSelected,e,!0)}})},h=m,v=(s("24bd"),s("2877")),p=Object(v["a"])(h,o,c,!1,null,"3057243e",null);p.options.__file="SidebarList.vue";var b=p.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title_bar"},[n("div",[n("h2",[e._v(e._s(e.name))])]),n("img",{attrs:{src:s("cf05"),alt:""}}),n("div",{staticClass:"icon_size",on:{click:function(t){e.modal1=!0}}},[n("Icon",{attrs:{size:"30",type:"ios-person-add"}})],1),n("Modal",{attrs:{title:"添加好友"},on:{"on-ok":e.ok},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[n("RadioGroup",{attrs:{vertical:""},model:{value:e.friend,callback:function(t){e.friend=t},expression:"friend"}},[e._l(e.friendsList,function(t){return n("Radio",{key:t.id,attrs:{label:t.username,disabled:t.id===e.user.objectId}})}),e._v("\n            "+e._s(e.friend)+"\n        ")],2)],1)],1)},C=[],S={name:"Title",computed:Object(r["a"])({},Object(l["d"])(["currentConversation","user","realtime"])),data:function(){return{name:"hello",modal1:!1,friend:"",friendsList:[]}},mounted:function(){var e=this;f["a"].$on("setTitle",function(t){e.name=t});var t=new d.a.Query("_User");t.find().then(function(t){e.friendsList=t.map(function(e){return Object(r["a"])({},e.attributes,{id:e.id})})},function(e){})},methods:{ok:function(){var e=this;if(""!==this.friend){var t=d.a.User.current();this.realtime.createIMClient(t).then(function(t){var s=e.friendsList.filter(function(t){return t.username===e.friend});return console.log(s),t.createConversation({members:[s[0].id],name:"".concat(e.user.username," & ").concat(e.friend)})}).then(function(e){f["a"].$emit("newConversation",e)})}}}},_=S,L=(s("2f83"),Object(v["a"])(_,g,C,!1,null,"3ee88957",null));L.options.__file="Title.vue";var y=L.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"send_message"},[n("img",{staticStyle:{"margin-right":"8px"},attrs:{src:s("e94e"),alt:""}}),n("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"Enter something...",clearable:"",autosize:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"ios-send"},on:{click:e.pushMessage}},[e._v("Send")])],1)},x=[],O={name:"SendMessage",data:function(){return{value:""}},methods:Object(r["a"])({},Object(l["b"])(["sendMessage"]),{pushMessage:function(){this.sendMessage(this.value).then(function(e){f["a"].$emit("sendSuccess",e)}),this.value=""}})},j=O,M=(s("5458"),Object(v["a"])(j,w,x,!1,null,"3c9a34ea",null));M.options.__file="SendMessage.vue";var k=M.exports,I={name:"Conversations",components:{SidebarList:b,Title:y,SendMessage:k},data:function(){return{isCollapsed:!1}},computed:Object(r["a"])({},Object(l["d"])(["realtime","user","currentConversationId"]),{listItemClasses:function(){return[this.isCollapsed?"list":""]}}),methods:Object(r["a"])({},Object(l["b"])(["checkLogin","findChatRoom"]),{joinChatRoom:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=d.a.User.current(),e.next=3,this.realtime.createIMClient(t).then(function(e){e.getChatRoomQuery().equalTo("name","聊天室").find().then(function(e){return e[0].join()}).then(function(e){e&&console.log("加入成功")}).catch(console.error.bind(console))});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}),created:function(){this.checkLogin(),this.joinChatRoom()}},T=I,$=(s("bbb5"),Object(v["a"])(T,n,i,!1,null,"018926d8",null));$.options.__file="Conversations.vue";t["default"]=$.exports},e853:function(e,t,s){var n=s("d3f4"),i=s("1169"),a=s("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},e94e:function(e,t,s){e.exports=s.p+"img/avatar.b0b1f026.jpeg"},efe0:function(e,t,s){"use strict";var n=s("2b0e");t["a"]=new n["default"]}}]);
//# sourceMappingURL=about.bab46205.js.map