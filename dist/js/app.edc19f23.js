(function(e){function t(t){for(var r,o,i=t[0],u=t[1],c=t[2],l=0,f=[];l<i.length;l++)o=i[l],s[o]&&f.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==s[i]&&(r=!1)}r&&(a.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},o={app:0},s={app:0},a=[];function i(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"63800ea4"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"bf66b12b"}[e]+".css",s=u.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===s))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){c=f[i],l=c.getAttribute("data-href");if(l===r||l===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.request=r,delete o[e],p.parentNode.removeChild(p),n(a)},p.href=s;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){o[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=a);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),c=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+r+": "+o+")");a.type=r,a.request=o,n[1](a)}s[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/chartroom-vue/dist/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var f=0;f<c.length;f++)t(c[f]);var p=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1d04":function(e,t,n){"use strict";var r=n("df5f"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],a=(n("5c0b"),n("2877")),i={},u=Object(a["a"])(i,o,s,!1,null,null,null);u.options.__file="App.vue";var c=u.exports,l=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Login",{staticClass:"login"})],1)},p=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_com"},[n("Form",{ref:"formInline",staticClass:"login_form",attrs:{model:e.formInline,rules:e.ruleInline}},[n("FormItem",{attrs:{prop:"user"}},[n("Input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),n("FormItem",{staticClass:"login_form_button"},[n("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formInline")}}},[e._v("Signin")]),n("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.handleReset("formInline")}}},[e._v("Rest")])],1)],1)],1)},m=[],g=(n("7f7f"),n("cebc")),h=n("2f62"),v={name:"Login",data:function(){return{formInline:{user:"",password:""},ruleInline:{user:[{required:!0,message:"Please fill in the user name",trigger:"blur"}],password:[{required:!0,message:"Please fill in the password.",trigger:"blur"},{type:"string",min:6,message:"The password length cannot be less than 6 bits",trigger:"blur"}]}}},computed:Object(g["a"])({},Object(h["d"])(["realtime"])),methods:Object(g["a"])({},Object(h["c"])(["setUser","setImClient"]),Object(h["b"])(["login","signUp"]),{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.onLogin():t.$Message.error("Fail!")})},handleReset:function(e){this.$refs[e].resetFields()},onLogin:function(){var e=this;this.login({username:this.formInline.user,password:this.formInline.password}).then(function(t){e.afterLogin(t)}).catch(function(t){e.beforeSignUp(t)})},afterLogin:function(e){this.$Loading.start(),this.setUser(e.toJSON()),this.$router.push("/conversations"),this.$Message.success("登陆成功!"),this.$Loading.finish()},beforeSignUp:function(e){210===e.code?(this.$Message.error("密码错误!"),this.$Loading.error()):211===e.code?this.onSignUp():(this.$Message.error("系统错误!"),this.$Loading.error())},onSignUp:function(){var e=this;this.signUp({username:this.formInline.user,password:this.formInline.password}).then(function(t){e.setUser(t.toJSON()),e.$Message.success("注册成功!"),e.$router.push("/conversations")})}})},b=v,w=(n("a3ee"),Object(a["a"])(b,d,m,!1,null,"7a9c7f80",null));w.options.__file="Login.vue";var y=w.exports,I={name:"home",components:{Login:y},created:function(){}},L=I,O=(n("1d04"),Object(a["a"])(L,f,p,!1,null,"51a59d89",null));O.options.__file="Home.vue";var x=O.exports,_=(n("96cf"),n("3b8d")),j=n("0631"),C=n.n(j),S=n("4fe3"),U={appId:"5T1S8zxRnWmgFgpmDAPqIKUX-gzGzoHsz",appKey:"7PIPLRqjitBfFdnra6zAYeGL"};C.a.init({appId:U.appId,appKey:U.appKey});var k=new S["Realtime"]({appId:U.appId,appKey:U.appKey});C.a.realtime=k;var $=C.a;r["default"].use(h["a"]);var P=new h["a"].Store({state:{user:null,isLogin:!1,imClient:null,currentConversation:null,currentConversationId:"",realtime:$.realtime},getters:{checkLogin:function(){var e=$.User.current();return!!e}},mutations:{setUser:function(e,t){e.user=t},setIsLogin:function(e,t){e.isLogin=t},setImClient:function(e,t){e.imClient=t},setCurrentConversationId:function(e,t){e.currentConversationId=t},setCurrentConversation:function(e,t){e.currentConversation=t}},actions:{login:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,r("setIsLogin",!0),e.next=4,$.User.logIn(n.username,n.password);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),signUp:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,$.User.signUp(n.username,n.password);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,t.state,e.next=3,$.User.logOut();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),sendMessage:function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,r=t.state,e.next=3,r.currentConversation.send(new S["TextMessage"](n));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),checkLogin:function(e){var t=e.commit,n=e.state;if(n.isLogin)return!0;var r=$.User.current();return!!r&&(t("setUser",r.toJSON()),t("setIsLogin",!0),!0)}}});r["default"].use(l["a"]);var R=new l["a"]({routes:[{path:"/",name:"home",component:x},{path:"/conversations",name:"conversations",meta:{requireLogin:!0},component:function(){return n.e("about").then(n.bind(null,"db80"))},children:[{path:":id",component:function(){return n.e("about").then(n.bind(null,"a304"))}}]}]});R.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requireLogin})?P.getters.checkLogin?n():n("/"):n()});var M=R,T=n("e069"),E=n.n(T);n("dcad");r["default"].use(E.a),r["default"].config.productionTip=!1,r["default"].filter("formatTime",function(e){var t=new Date(e),n=t.getDate(),r=t.getMonth()+1,o=t.getFullYear(),s=t.getHours(),a=t.getMinutes(),i=t.getSeconds();return a<10&&(a="0"+"".concat(a)),i<10&&(i="0"+"".concat(i)),"".concat(o,"/").concat(r,"/").concat(n," ").concat(s,":").concat(a,":").concat(i)}),new r["default"]({router:M,store:P,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(e,t,n){},a3ee:function(e,t,n){"use strict";var r=n("ef60"),o=n.n(r);o.a},df5f:function(e,t,n){},ef60:function(e,t,n){}});
//# sourceMappingURL=app.edc19f23.js.map